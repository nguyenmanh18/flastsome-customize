jQuery(document).ready(function(e){var t=attach.allowed_extensions.replace(" ","").split(",");e("#commentform").attr("enctype","multipart/form-data"),e("#do_uploadFile").click(function(){e("#ywar-uploadFile").click()}),e("#ywar-uploadFile").on("change",function(){e(".ywar-attachment-notice").remove();var t=this;if(attach.limit_multiple_upload>0&&t.files.length>attach.limit_multiple_upload)return e(this).closest(".upload_section").append('<p class="ywar-attachment-notice">'+attach.too_many_attachment_selected+"</p>"),void(t.value="");for(var i=document.getElementById("uploadFileList"),l=function(e,t){var a=new FileReader;a.readAsDataURL(e[t]),a.onload=function(e){document.getElementById("img_preview"+t).src=e.target.result}};i.hasChildNodes();)i.removeChild(i.firstChild);for(var n=0,o=0;o<t.files.length;o++){if(a(t.files[o]))(r=document.createElement("li")).innerHTML='<div style="display: inline;"><img id="img_preview'+o+'" style="width: 100px; height: 100px;"></div>',l(t.files,o),i.appendChild(r);else n++}if(n)e(this).closest(".upload_section").append('<p class="ywar-attachment-notice">'+attach.attachments_failed_validation+"</p>");else if(!i.hasChildNodes()){var r;(r=document.createElement("li")).innerHTML=attach.no_attachment_selected,i.appendChild(r)}});var a=function(a){var i=a.name.lastIndexOf(".")+1,l=a.name.substring(i).toLowerCase();if(-1==e.inArray(l,t))return!1;if(attach.allowed_max_size>0&&a.size/1024/1024>attach.allowed_max_size)return!1;return!0};e("#commentform").submit(function(){var e=document.getElementById("ywar-uploadFile");if(null!=e&&attach.limit_multiple_upload>0&&e.files.length>attach.limit_multiple_upload)return!1})});